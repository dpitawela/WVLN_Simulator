import { AfterViewChecked, ChangeDetectorRef, Component, Input } from '@angular/core';
import { ActionModel, StoreModel } from '../types/model';
import { Buffer } from 'buffer';

@Component({
  selector: 'app-playback-base',
  templateUrl: './playback-base.component.html',
  styleUrls: ['./playback-base.component.css']
})
export class PlaybackBaseComponent implements AfterViewChecked {
  retrievedActions: StoreModel
  isPlaying: boolean = false
  isPaused: boolean = false
  jumpNextStep: boolean = false
  jumpPreviousStep: boolean = false

  nActions = 0
  currentIteration: number = -1

  constructor(private cdr: ChangeDetectorRef) {
    let strObject: string =
      //'{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":484,"y_pos":570,"href":"collections/womens-new-arrivals.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLW5ldy1hcnJpdmFscy5odG1sIiBjbGFzcz0iYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi1tZWRpdW0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLXdoaXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC1zaXplLTIKICAgICAgICAgICAgICAgICAgICAgICAgdHh0LXRyYWNrZWQtdHdvLXBvaW50Ij4KICAgICAgICAgICAgICAgICBTaG9wIE5ldyBBcnJpdmFscwogICAgICAgICAgICAgIDwvYT4="}]}'
      // '{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":358,"y_pos":557,"href":"collections/womens-new-arrivals.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLW5ldy1hcnJpdmFscy5odG1sIiBjbGFzcz0iYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi1tZWRpdW0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLXdoaXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC1zaXplLTIKICAgICAgICAgICAgICAgICAgICAgICAgdHh0LXRyYWNrZWQtdHdvLXBvaW50Ij4KICAgICAgICAgICAgICAgICBTaG9wIE5ldyBBcnJpdmFscwogICAgICAgICAgICAgIDwvYT4="},{"type":"click","x_pos":489,"y_pos":718,"href":"womens-new-arrivals/products/sloane-dress-navy.html","outer_html":"PGEgaHJlZj0id29tZW5zLW5ldy1hcnJpdmFscy9wcm9kdWN0cy9zbG9hbmUtZHJlc3MtbmF2eS5odG1sIj4KICAgIAogICAgCiAgICAgIAogICAgICAgIAogICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA3ODAvNDk5MS9wcm9kdWN0cy9oZmJfMTEwMzcwX3Nsb2FuZV9kcmVzc19uYXZ5LTE0MDdfMTAyNHgxMDI0ZTk1MS5qcGc/dj0xNjQ5MjA0Njk5IiBhbHQ9Im5hdnkiIGRhdGEtdmFyaWFudC1pZD0iNDAxMTY5ODQ4NzMwMDciIGNsYXNzPSJwcm9kdWN0LWNhcmQtaW1hZ2UKICAgICAgICAgICAgICAgICAgICBqcy12YXJpYW50LXN3aXRjaGVyCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIGlzLWFjdGl2ZQogICAgICAgICAgICAgICAgICAgICI+CiAgICAgIAogICAgICAgIAogICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA3ODAvNDk5MS9wcm9kdWN0cy9oZmJfMTEwMzcwX3Nsb2FuZV9kcmVzc19uYXZ5LTE0MDdfMTAyNHgxMDI0ZTk1MS5qcGc/dj0xNjQ5MjA0Njk5IiBhbHQ9Im5hdnkiIGRhdGEtdmFyaWFudC1pZD0iNDAxMTY5ODQ5Mzg1NDMiIGNsYXNzPSJwcm9kdWN0LWNhcmQtaW1hZ2UKICAgICAgICAgICAgICAgICAgICBqcy12YXJpYW50LXN3aXRjaGVyCiAgICAgICAgICAgICAgICAgICAgIj4KICAgICAgCiAgICAgICAgCiAgICAgICAgPGltZyBzcmM9Ii4uLy4uL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDc4MC80OTkxL3Byb2R1Y3RzL2hmYl8xMTAzNzBfc2xvYW5lX2RyZXNzX25hdnktMTQwN18xMDI0eDEwMjRlOTUxLmpwZz92PTE2NDkyMDQ2OTkiIGFsdD0ibmF2eSIgZGF0YS12YXJpYW50LWlkPSI0MDExNjk4NDk3MTMxMSIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgIAogIDwvYT4="},{"type":"click","x_pos":554,"y_pos":429,"href":"","outer_html":"PGlucHV0IHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ1dHRvbiBidXR0b24td2lkZSBqcy1hZGQtdG8tY2FydCIgZGF0YS1kcmF3ZXI9ImNhcnQiIGRhdGEtY2hlY2tvdXQ9IjQwMTE2OTg0ODczMDA3IiBuYW1lPSJhZGQiIHZhbHVlPSJhZGQgdG8gY2FydCI+"},{"type":"click","x_pos":556,"y_pos":364,"href":"","outer_html":"PGJ1dHRvbiB0eXBlPSJzdWJtaXQiIG5hbWU9ImNoZWNrb3V0IiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1zbWFsbCBidXR0b24td2lkZSB0eHQtY2VudGVyIj4KICAgICAgICAgIDxzcGFuPkNoZWNrb3V0PC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9IkJ1dHRvbl9fU2VwYXJhdG9yRG90Ij48L3NwYW4+CiAgICAgICAgICA8c3BhbiBydi1odG1sPSJjYXJ0LnRvdGFsX3ByaWNlIHwgbW9uZXlfd2l0aF9jdXJyZW5jeSBDdXJyZW5jeS5jdXJyZW50Q3VycmVuY3kiPiQwLjAwPC9zcGFuPgogICAgICAgIDwvYnV0dG9uPg=="}]}'
      //'{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":482,"y_pos":570,"href":"collections/womens-new-arrivals.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLW5ldy1hcnJpdmFscy5odG1sIiBjbGFzcz0iYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi1tZWRpdW0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLXdoaXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC1zaXplLTIKICAgICAgICAgICAgICAgICAgICAgICAgdHh0LXRyYWNrZWQtdHdvLXBvaW50Ij4KICAgICAgICAgICAgICAgICBTaG9wIE5ldyBBcnJpdmFscwogICAgICAgICAgICAgIDwvYT4="},{"type":"click","x_pos":513,"y_pos":724,"href":"womens-new-arrivals/products/asha-jumpsuit-bloom.html","outer_html":"PGEgaHJlZj0id29tZW5zLW5ldy1hcnJpdmFscy9wcm9kdWN0cy9hc2hhLWp1bXBzdWl0LWJsb29tLmh0bWwiPgogICAgCiAgICAKICAgICAgCiAgICAgICAgCiAgICAgICAgPGltZyBzcmM9Ii4uLy4uL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDc4MC80OTkxL3Byb2R1Y3RzL2hmYl8xMTAzNjNfYXNoYV9qdW1wc3VpdF9ibG9vbS0wOTk4XzEwMjR4MTAyNGVmYWYuanBnP3Y9MTY0ODE3MzQ2NCIgYWx0PSJibG9vbSIgZGF0YS12YXJpYW50LWlkPSI0MDExNjk2MTI0NzI3OSIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgaXMtYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgIj4KICAgICAgCiAgICAgICAgCiAgICAgICAgPGltZyBzcmM9Ii4uLy4uL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDc4MC80OTkxL3Byb2R1Y3RzL2hmYl8xMTAzNjNfYXNoYV9qdW1wc3VpdF9ibG9vbS0wOTk4XzEwMjR4MTAyNGVmYWYuanBnP3Y9MTY0ODE3MzQ2NCIgYWx0PSJibG9vbSIgZGF0YS12YXJpYW50LWlkPSI0MDExNjk2MTM3ODM1MSIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvaGZiXzExMDM2M19hc2hhX2p1bXBzdWl0X2Jsb29tLTA5OThfMTAyNHgxMDI0ZWZhZi5qcGc/dj0xNjQ4MTczNDY0IiBhbHQ9ImJsb29tIiBkYXRhLXZhcmlhbnQtaWQ9IjQwMTE2OTYxNDc2NjU1IiBjbGFzcz0icHJvZHVjdC1jYXJkLWltYWdlCiAgICAgICAgICAgICAgICAgICAganMtdmFyaWFudC1zd2l0Y2hlcgogICAgICAgICAgICAgICAgICAgICI+CiAgICAgIAogICAgCiAgPC9hPg=="},{"type":"click","x_pos":524,"y_pos":346,"href":"asha-jumpsuit-bloome3d1.html?variant=40116961378351","outer_html":"PGEgaHJlZj0iYXNoYS1qdW1wc3VpdC1ibG9vbWUzZDEuaHRtbD92YXJpYW50PTQwMTE2OTYxMzc4MzUxIiBkYXRhLXByb2R1Y3QtaWQ9IjY3NzQ1MjI0MTMxMDMiIGRhdGEtc2l6ZT0iMiIgY2xhc3M9ImpzLXNldC1zaXplICAgICAgICAgICAgICAgc2l6ZS1waWNrZXIgICAgICAgICAgICAgICBidXR0b24gICAgICAgICAgICAgICBidXR0b24tc21hbGwgICAgICAgICAgICAgICB0eHQtc2l6ZS0wIGlzLWFjdGl2ZSI+CiAgICAgIDIKICAgIDwvYT4="}]}'
      //'{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":454,"y_pos":585,"href":"collections/womens-new-arrivals.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLW5ldy1hcnJpdmFscy5odG1sIiBjbGFzcz0iYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi1tZWRpdW0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLXdoaXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC1zaXplLTIKICAgICAgICAgICAgICAgICAgICAgICAgdHh0LXRyYWNrZWQtdHdvLXBvaW50Ij4KICAgICAgICAgICAgICAgICBTaG9wIE5ldyBBcnJpdmFscwogICAgICAgICAgICAgIDwvYT4="},{"type":"click","x_pos":457,"y_pos":639,"href":"womens-new-arrivals/products/penny-apron-dress-bloom.html","outer_html":"PGEgaHJlZj0id29tZW5zLW5ldy1hcnJpdmFscy9wcm9kdWN0cy9wZW5ueS1hcHJvbi1kcmVzcy1ibG9vbS5odG1sIj4KICAgIAogICAgCiAgICAgIAogICAgICAgIAogICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA3ODAvNDk5MS9wcm9kdWN0cy9oZmJfMTEwMzcyX3Blbm55X2Fwcm9uX2RyZXNzX2Jsb29tLTIzOTlfMTAyNHgxMDI0M2VhOS5qcGc/dj0xNjQ3OTgxNDg3IiBhbHQ9ImJsb29tIiBkYXRhLXZhcmlhbnQtaWQ9IjQwMTE2OTc5MTcxMzc1IiBjbGFzcz0icHJvZHVjdC1jYXJkLWltYWdlCiAgICAgICAgICAgICAgICAgICAganMtdmFyaWFudC1zd2l0Y2hlcgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICBpcy1hY3RpdmUKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvaGZiXzExMDM3Ml9wZW5ueV9hcHJvbl9kcmVzc19ibG9vbS0yMzk5XzEwMjR4MTAyNDNlYTkuanBnP3Y9MTY0Nzk4MTQ4NyIgYWx0PSJibG9vbSIgZGF0YS12YXJpYW50LWlkPSI0MDExNjk3OTMwMjQ0NyIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvaGZiXzExMDM3Ml9wZW5ueV9hcHJvbl9kcmVzc19ibG9vbS0yMzk5XzEwMjR4MTAyNDNlYTkuanBnP3Y9MTY0Nzk4MTQ4NyIgYWx0PSJibG9vbSIgZGF0YS12YXJpYW50LWlkPSI0MDExNjk3OTMzNTIxNSIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgIAogIDwvYT4="}]}'
      //'{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":42,"y_pos":84,"href":"#","outer_html":"PGEgaHJlZj0iIyIgY2xhc3M9Im5hdi1saW5rCiAgICAgICAgICAgICAgICBqcy10b3AtZHJhd2VyLWNsaWNrIiBkYXRhLXRvcD0ic3VibmF2Ij4KICAgICAgICA8IS0tP3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/LS0+CjxzdmcgY2xhc3M9Imljb24gaWNvbi1tZW51IiB2aWV3Qm94PSIwIDAgMTcgOSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDcgKDQ1Mzk2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCBDb3B5bWVudTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPgogICAgICAgIDxnIGlkPSJtb2JpbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xOC4wMDAwMDAsIC0zNy4wMDAwMDApIiBzdHJva2U9IiMwMDAwMDAiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTguMDAwMDAwLCAzNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMC41IEwxNi41LDAuNSIgaWQ9IkxpbmUiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsNC41IEwxNi41LDQuNSIgaWQ9IkxpbmUtQ29weSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNSw4LjUgTDE2LjUsOC41IiBpZD0iTGluZS1Db3B5LTIiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+CiAgICAgIDwvYT4="},{"type":"click","x_pos":419,"y_pos":379,"href":"collections/mens.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvbWVucy5odG1sIiBjbGFzcz0idG9wbmF2LW1vYmlsZS1saW5rIiBpZD0ibmF2LW1haW4tbWVucyIgYWx0PSJNZW4ncyI+CiAgICAgICAgICAgIE1lbidzCiAgICAgIAkgIDwvYT4="},{"type":"click","x_pos":408,"y_pos":511,"href":"collections/mens-socks.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvbWVucy1zb2Nrcy5odG1sIiBjbGFzcz0idG9wbmF2LW1vYmlsZS1saW5rIiBpZD0ibmF2LW1haW4tc29ja3MiIGFsdD0iU29ja3MiPgogICAgICAgICAgICBTb2NrcwogICAgICAJICA8L2E+"},{"type":"click","x_pos":132,"y_pos":614,"href":"mens-socks/products/lykke-mens-crew.html","outer_html":"PGEgaHJlZj0ibWVucy1zb2Nrcy9wcm9kdWN0cy9seWtrZS1tZW5zLWNyZXcuaHRtbCI+CiAgICAKICAgIAogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvMTU5NjMyODg0NmhmYl8xMTA1MDFfbHlra2VfY3Jld19pdm9yeV8xMDI0eDEwMjQ5MGM4LmpwZz92PTE2MTU4NjQ3MzIiIGFsdD0iaXZvcnkiIGRhdGEtdmFyaWFudC1pZD0iMzI0OTM3MzY0NjAzMzUiIGNsYXNzPSJwcm9kdWN0LWNhcmQtaW1hZ2UKICAgICAgICAgICAgICAgICAgICBqcy12YXJpYW50LXN3aXRjaGVyCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIGlzLWFjdGl2ZQogICAgICAgICAgICAgICAgICAgICI+CiAgICAgIAogICAgICAgIAogICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA3ODAvNDk5MS9wcm9kdWN0cy8xNTk2MzI4ODQ2aGZiXzExMDUwMV9seWtrZV9jcmV3X2JsYWNrXzEwMjR4MTAyNDkwYzguanBnP3Y9MTYxNTg2NDczMiIgYWx0PSJibGFjayIgZGF0YS12YXJpYW50LWlkPSIzMjQ5MzczNjM2MjAzMSIgY2xhc3M9InByb2R1Y3QtY2FyZC1pbWFnZQogICAgICAgICAgICAgICAgICAgIGpzLXZhcmlhbnQtc3dpdGNoZXIKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgIAogIDwvYT4="},{"type":"click","x_pos":445,"y_pos":483,"href":"../../../pages/press.html","outer_html":"PGEgaHJlZj0iLi4vLi4vLi4vcGFnZXMvcHJlc3MuaHRtbCIgY2xhc3M9ImZvb3Rlci1saW5rIj4KICAgICAgICAgICAgUHJlc3MKICAgICAgICAgIDwvYT4="}]}'
      '{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":42,"y_pos":74,"href":"#","outer_html":"PGEgaHJlZj0iIyIgY2xhc3M9Im5hdi1saW5rCiAgICAgICAgICAgICAgICBqcy10b3AtZHJhd2VyLWNsaWNrIiBkYXRhLXRvcD0ic3VibmF2Ij4KICAgICAgICA8IS0tP3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/LS0+CjxzdmcgY2xhc3M9Imljb24gaWNvbi1tZW51IiB2aWV3Qm94PSIwIDAgMTcgOSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDcgKDQ1Mzk2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCBDb3B5bWVudTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPgogICAgICAgIDxnIGlkPSJtb2JpbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xOC4wMDAwMDAsIC0zNy4wMDAwMDApIiBzdHJva2U9IiMwMDAwMDAiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTguMDAwMDAwLCAzNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMC41IEwxNi41LDAuNSIgaWQ9IkxpbmUiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsNC41IEwxNi41LDQuNSIgaWQ9IkxpbmUtQ29weSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNSw4LjUgTDE2LjUsOC41IiBpZD0iTGluZS1Db3B5LTIiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+CiAgICAgIDwvYT4="},{"type":"click","x_pos":387,"y_pos":258,"href":"collections/womens.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLmh0bWwiIGNsYXNzPSJ0b3BuYXYtbW9iaWxlLWxpbmsiIGlkPSJuYXYtbWFpbi13b21lbnMiIGFsdD0iV29tZW4ncyI+CiAgICAgICAgICAgIFdvbWVuJ3MKICAgICAgCSAgPC9hPg=="},{"type":"click","x_pos":399,"y_pos":315,"href":"collections/womens.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLmh0bWwiIGNsYXNzPSJ0b3BuYXYtbW9iaWxlLWxpbmsiIGlkPSJuYXYtbWFpbi1hbGwiIGFsdD0iQWxsIj4KICAgICAgICAgICAgQWxsCiAgICAgIAkgIDwvYT4="}]}'
    //'{"url":"assets/crawled/hansel/hanselfrombasel.com/index.html","actions":[{"type":"click","x_pos":684,"y_pos":569,"href":"collections/womens-new-arrivals.html","outer_html":"PGEgaHJlZj0iY29sbGVjdGlvbnMvd29tZW5zLW5ldy1hcnJpdmFscy5odG1sIiBjbGFzcz0iYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi1tZWRpdW0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLXdoaXRlCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dC1zaXplLTIKICAgICAgICAgICAgICAgICAgICAgICAgdHh0LXRyYWNrZWQtdHdvLXBvaW50Ij4KICAgICAgICAgICAgICAgICBTaG9wIE5ldyBBcnJpdmFscwogICAgICAgICAgICAgIDwvYT4="},{"type":"click","x_pos":79,"y_pos":174,"href":"womens.html","outer_html":"PGEgaHJlZj0id29tZW5zLmh0bWwiIGNsYXNzPSJzaWRlbmF2LWxpbmsKICAgICAgICAgICAgICAiPgogICAgICBTaG9wIEFsbAogICAgICAKICAgICAgCiAgICA8L2E+"},{"type":"click","x_pos":664,"y_pos":328,"href":"womens/products/leona-dress-navy.html","outer_html":"PGEgaHJlZj0id29tZW5zL3Byb2R1Y3RzL2xlb25hLWRyZXNzLW5hdnkuaHRtbCI+CiAgICAKICAgIAogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvaGZiXzExMDE4OWJfbGVvbmFfZHJlc3NfbmF2eS0yNzk0XzEwMjR4MTAyNGVlODguanBnP3Y9MTY0Njc4MDQxMCIgYWx0PSJuYXZ5IiBkYXRhLXZhcmlhbnQtaWQ9IjQwMTE2OTYzMzExNjYzIiBjbGFzcz0icHJvZHVjdC1jYXJkLWltYWdlCiAgICAgICAgICAgICAgICAgICAganMtdmFyaWFudC1zd2l0Y2hlcgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICBpcy1hY3RpdmUKICAgICAgICAgICAgICAgICAgICAiPgogICAgICAKICAgICAgICAKICAgICAgICA8aW1nIHNyYz0iLi4vLi4vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNzgwLzQ5OTEvcHJvZHVjdHMvaGZiXzExMDE4OWJfbGVvbmFfZHJlc3NfbmF2eS0yNzk0XzEwMjR4MTAyNGVlODguanBnP3Y9MTY0Njc4MDQxMCIgYWx0PSJuYXZ5IiBkYXRhLXZhcmlhbnQtaWQ9IjQwMTE2OTYzNTQxMDM5IiBjbGFzcz0icHJvZHVjdC1jYXJkLWltYWdlCiAgICAgICAgICAgICAgICAgICAganMtdmFyaWFudC1zd2l0Y2hlcgogICAgICAgICAgICAgICAgICAgICI+CiAgICAgIAogICAgICAgIAogICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA3ODAvNDk5MS9wcm9kdWN0cy9oZmJfMTEwMTg5Yl9sZW9uYV9kcmVzc19uYXZ5LTI3OTRfMTAyNHgxMDI0ZWU4OC5qcGc/dj0xNjQ2NzgwNDEwIiBhbHQ9Im5hdnkiIGRhdGEtdmFyaWFudC1pZD0iNDAxMTY5NjM2MDY1NzUiIGNsYXNzPSJwcm9kdWN0LWNhcmQtaW1hZ2UKICAgICAgICAgICAgICAgICAgICBqcy12YXJpYW50LXN3aXRjaGVyCiAgICAgICAgICAgICAgICAgICAgIj4KICAgICAgCiAgICAKICA8L2E+"}]}'




    this.retrievedActions = JSON.parse(strObject) as StoreModel
    // converting html from base64 to binary in all click actions
    if (this.retrievedActions.actions)
      for (let action of this.retrievedActions.actions) {
        if (action.type == 'click' && action.outer_html) {
          action.outer_html = Buffer.from(action.outer_html, 'base64').toString('binary')
        }
      }

    console.log("received object:", this.retrievedActions)
    // '//*[@id="shopify-section-hero"]/div[1]/div/div/div/div/div/a'
  }
  ngAfterViewChecked(): void {
    this.cdr.detectChanges();
  }

  updateIteration(iteration: number) {
    this.currentIteration = iteration + 1
  }

  getTotalActions(nActions: number) {
    this.nActions = nActions
  }
}